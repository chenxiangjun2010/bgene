<page-header [title]="'ÂåªÈô¢ÔºåÁßëÂÆ§ÂèäÂåªÁîü‰ø°ÊÅØ'">

    <ng-template #tab>
        <nz-tabset [(nzSelectedIndex)]="pos">
            <nz-tab *ngFor="let i of tabs" [nzTitle]="i.tab"></nz-tab>
        </nz-tabset>
    </ng-template>
    <!-- <ng-template #extra>
        <div style="margin-top: -60px; text-align: center; width: 195px;">
            <img class="img-fluid" src="https://gw.alipayobjects.com/zos/rmsportal/RzwpdLnhmvDJToTdfDPe.png">
        </div>
    </ng-template> -->
    <!-- ÊÆµËêΩÁ§∫ÊÑèÔºöÂø´ÈÄüÂºÄÂßãËøõË°åÂÆ¢Êà∑‰ø°ÊÅØÁöÑÂΩïÂÖ•
    <div class="d-flex pt-md">
        <a class="d-flex pr-lg" (click)="addHospital()">
            <img class="pr-sm" src="https://gw.alipayobjects.com/zos/rmsportal/MjEImQtenlyueSmVEfUD.svg" />ÂåªÈô¢ÂºÄÂßã
        </a>
        <a class="d-flex pr-lg" (click)="addDepartment()">
            <img class="pr-sm" src="https://gw.alipayobjects.com/zos/rmsportal/NbuDUAuBlIApFuDvWiND.svg" />ÁßëÂÆ§ÂºÄÂßã
        </a>
        <a class="d-flex" (click)="addDoctor()">
            <img class="pr-sm" src="https://gw.alipayobjects.com/zos/rmsportal/ohOEPSYdDTNnyMbGuyLb.svg" />ÂåªÁîüÂºÄÂßã
        </a>
    </div> -->
</page-header>

<nz-row nzGutter="8">
    <nz-card [nzBordered]="false" *ngIf="pos==0">
        <form nz-form [nzLayout]="'inline'" (ngSubmit)="getData()" class="search__form" style="margin-bottom: 0">
            <nz-row [nzGutter]="{ md: 8, lg: 24, xl: 48 }">
                <nz-col nzMd="8" nzSm="24">
                    <nz-form-item>
                        <nz-form-label nzFor="hospital">ÂåªÈô¢</nz-form-label>
                        <nz-form-control>
                            <input nz-input [(ngModel)]="hospital" name="hospital" placeholder="ËØ∑ËæìÂÖ•" id="no">
                        </nz-form-control>
                    </nz-form-item>
                </nz-col>
                <nz-col nzSpan="8">
                    <button nz-button type="submit" [nzType]="'primary'" [nzLoading]="loading">Êü•ËØ¢</button>
                    <button nz-button type="reset" (click)="getData()" class="mx-sm">ÈáçÁΩÆ</button>
                </nz-col>
            </nz-row>
        </form>
    </nz-card>
    <nz-card [nzBordered]="false" *ngIf="pos==1">
        <form nz-form [nzLayout]="'inline'" (ngSubmit)="getData()" class="search__form" style="margin-bottom: 0">
            <nz-row [nzGutter]="{ md: 8, lg: 24, xl: 48 }">
                <nz-col nzMd="8" nzSm="24">
                    <nz-form-item>
                        <nz-form-label nzFor="affiliationHospital">ÊâÄÂ±ûÂåªÈô¢</nz-form-label>
                        <nz-form-control>
                            <input nz-input [(ngModel)]="affiliationHospital" name="affiliationHospital" placeholder="ËØ∑ËæìÂÖ•" id="no">
                        </nz-form-control>
                    </nz-form-item>
                </nz-col>
                <nz-col nzMd="8" nzSm="24">
                    <nz-form-item>
                        <nz-form-label nzFor="departent">ÁßëÂÆ§</nz-form-label>
                        <nz-form-control>
                            <nz-select [(ngModel)]="departent" name="departent" [nzPlaceHolder]="'ËØ∑ÈÄâÊã©'" [nzShowSearch]="true">
                                <nz-option *ngFor="let i of status; let idx = index" [nzLabel]="i.text" [nzValue]="idx"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </nz-col>
                <nz-col nzSpan="8">
                    <button nz-button type="submit" [nzType]="'primary'" [nzLoading]="loading">Êü•ËØ¢</button>
                    <button nz-button type="reset" (click)="getData()" class="mx-sm">ÈáçÁΩÆ</button>
                </nz-col>
            </nz-row>
        </form>
    </nz-card>

    <nz-card [nzBordered]="false" *ngIf="pos==2">
        <form nz-form [nzLayout]="'inline'" (ngSubmit)="getData()" class="search__form" style="margin-bottom: 0">
            <nz-row [nzGutter]="{ md: 8, lg: 24, xl: 48 }">
                <nz-col nzMd="8" nzSm="24">
                    <nz-form-item>
                        <nz-form-label nzFor="affiliationHospital">ÊâÄÂ±ûÂåªÈô¢</nz-form-label>
                        <nz-form-control>
                            <input nz-input [(ngModel)]="affiliationHospital" name="affiliationHospital" placeholder="ËØ∑ËæìÂÖ•" id="no">
                        </nz-form-control>
                    </nz-form-item>
                </nz-col>
                <nz-col nzMd="8" nzSm="24">
                    <nz-form-item>
                        <nz-form-label nzFor="affiliationDep">ÊâÄÂ±ûÁßëÂÆ§</nz-form-label>
                        <nz-form-control>
                            <nz-select [(ngModel)]="affiliationDep" name="affiliationDep" [nzPlaceHolder]="'ËØ∑ÈÄâÊã©'" [nzShowSearch]="true">
                                <nz-option *ngFor="let i of status; let idx = index" [nzLabel]="i.text" [nzValue]="idx"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </nz-col>
                <nz-col nzMd="8" nzSm="24" *ngIf="expandForm">
                    <nz-form-item>
                        <nz-form-label nzFor="doctor">ÂåªÁîü</nz-form-label>
                        <nz-form-control>
                            <nz-select [(ngModel)]="doctor" name="doctor" [nzPlaceHolder]="'ËØ∑ÈÄâÊã©'" [nzShowSearch]="true">
                                <nz-option *ngFor="let i of status; let idx = index" [nzLabel]="i.text" [nzValue]="idx"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </nz-col>
                <nz-col [nzSpan]="expandForm ? 24 : 8" [class.text-right]="expandForm">
                    <button nz-button type="submit" [nzType]="'primary'" [nzLoading]="loading">Êü•ËØ¢</button>
                    <button nz-button type="reset" (click)="getData()" class="mx-sm">ÈáçÁΩÆ</button>
                    <a (click)="expandForm=!expandForm">
                        {{expandForm ? 'Êî∂Ëµ∑' : 'Â±ïÂºÄ'}}
                        <i class="anticon" [class.anticon-down]="!expandForm" [class.anticon-up]="expandForm"></i>
                    </a>
                </nz-col>
            </nz-row>
        </form>
    </nz-card>
    <nz-col>
        <nz-card [nzBordered]="false">
            <button nz-button (click)="addHospital()" *ngIf="pos==0" [nzType]="'dashed'" class="ant-btn__block mb-sm">
                <i class="anticon anticon-plus"></i>
                <span>Ê∑ªÂä†</span>
            </button>
            <button nz-button (click)="addDepartment()" *ngIf="pos==1" [nzType]="'dashed'" class="ant-btn__block mb-sm">
                <i class="anticon anticon-plus"></i>
                <span>Ê∑ªÂä†</span>
            </button>
            <button nz-button (click)="addDoctor()" *ngIf="pos==2" [nzType]="'dashed'" class="ant-btn__block mb-sm">
                <i class="anticon anticon-plus"></i>
                <span>Ê∑ªÂä†</span>
            </button>
            <nz-list [nzDataSource]="hospitals" [nzLoading]="loading" [nzRenderItem]="item" [nzPagination]="pagination">
                <ng-template #item let-item>
                    <nz-list-item [nzContent]="nzContent" [nzActions]="[edit, op]">
                        <ng-template #edit>
                            <a (click)="updataHospital(item)">ÁºñËæë</a>
                        </ng-template>
                        <ng-template #op>
                            <nz-popconfirm [nzTitle]="'Á°ÆÂÆöË¶ÅÂà†Èô§ÂåªÈô¢ÂêóÔºü'" (nzOnConfirm)="delHospital(item)" [nzPlacement]="'bottom'">
                                <a nz-popconfirm>Âà†Èô§</a>
                            </nz-popconfirm>
                        </ng-template>
                        <nz-list-item-meta [nzTitle]="nzTitle" nzDescription={{item.remark}} [nzAvatar]="nzAvatar">
                            <ng-template #nzTitle>
                                <a target="_blank">{{item.name}}</a>
                            </ng-template>
                            <ng-template #nzAvatar>
                                <nz-avatar [nzSrc]="'./assets/image/hospital.png'" nzSize="large" [nzShape]="'square'"></nz-avatar>
                            </ng-template>
                        </nz-list-item-meta>
                        <ng-template #nzContent>
                            <div class="width-md">
                                <div class="d-flex text-grey-dark">
                                    <div class="flex-1">
                                        ËÅîÁ≥ªÊñπÂºè
                                        <p>{{item.phone}}</p>
                                    </div>
                                    <div class="text-right">
                                        Âú∞ÂùÄ
                                        <p>{{item.address}}</p>
                                    </div>
                                </div>
                                <!-- <nz-progress [nzPercent]="item.percent" [nzStatus]="item.status" [nzStrokeWidth]="6"></nz-progress> -->
                            </div>
                        </ng-template>
                    </nz-list-item>
                </ng-template>
                <ng-template #pagination>
                    <nz-pagination [nzTotal]="totalHospital" [nzPageSize]="5" (nzPageIndexChange)="getData()"></nz-pagination>
                </ng-template>
            </nz-list>
        </nz-card>
    </nz-col>
    <!-- <nz-col nzSpan="6">
        <nz-card [nzBordered]="false">
            <nz-tree [(ngModel)]="nodes" [nzShowLine]="true" [nzDefaultExpandedKeys]="expandKeys" (nzClick)="mouseAction('click',$event)">
            </nz-tree>
        </nz-card>
    </nz-col> -->
</nz-row>


<!-- Êñ∞Â¢ûÂåªÈô¢ -->
<nz-modal [(nzVisible)]="hospitalVisible" [nzTitle]="hospitalTitle" [nzContent]="modalContent" [nzFooter]="modalFooter" (nzOnCancel)="hospitalVisible=false">
    <ng-template #modalContent>
        <form nz-form [formGroup]="form">
            <nz-form-item>
                <nz-form-label nzRequired [nzSpan]="7">ÂåªÈô¢ÂêçÁß∞</nz-form-label>
                <nz-form-control nzHasFeedback [nzSpan]="12">
                    <input nz-input formControlName="name" placeholder="ËØ∑ËæìÂÖ•ÂåªÈô¢ÂêçÁß∞">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label [nzSpan]="7">ÂåªÈô¢ËÅîÁ≥ªÊñπÂºè</nz-form-label>
                <nz-form-control nzHasFeedback [nzSpan]="12">
                    <input nz-input formControlName="phone" placeholder="ËØ∑ËæìÂÖ•ÂåªÈô¢ËÅîÁ≥ªÊñπÂºè">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label nzRequired [nzSpan]="7">ÂåªÈô¢Âú∞ÂùÄ</nz-form-label>
                <nz-form-control nzHasFeedback [nzSpan]="12">
                    <input formControlName="address" nz-input placeholder="ËØ∑ËæìÂÖ•ÂåªÈô¢Âú∞ÂùÄ">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label nzRequired [nzSpan]="7">Â§áÊ≥®</nz-form-label>
                <nz-form-control nzHasFeedback [nzSpan]="12">
                    <input formControlName="remark" nz-input placeholder="ËØ∑ËæìÂÖ•Â§áÊ≥®">
                </nz-form-control>
            </nz-form-item>
        </form>
    </ng-template>
    <ng-template #modalFooter>
        <div nz-row [nzType]="'flex'" [nzJustify]="'center'">
            <button nz-button [nzType]="'primary'" [disabled]="!form.valid" (click)="submitForm($event,form.value)">Êèê‰∫§</button>
            <button nz-button (click)="resetForm($event)">ÈáçÁΩÆ</button>
        </div>
    </ng-template>
</nz-modal>


<!-- Êñ∞Â¢ûÁßëÂÆ§ -->
<nz-modal [(nzVisible)]="departVisible" [nzTitle]="departTitle" [nzContent]="departContent" [nzFooter]="departFooter" (nzOnCancel)="departVisible=false">
    <ng-template #departContent>
        <form nz-form [formGroup]="departmentForm">
            <nz-form-item>
                <nz-form-label nzRequired [nzSpan]="7">ÊâÄÂ±ûÂåªÈô¢</nz-form-label>
                <nz-form-control nzHasFeedback [nzSpan]="12">
                    <input nz-input formControlName="affiliationHospital" placeholder="ËØ∑ËæìÂÖ•ÂåªÈô¢ÂêçÁß∞">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label [nzSpan]="7">ÁßëÂÆ§ÂêçÁß∞</nz-form-label>
                <nz-form-control nzHasFeedback [nzSpan]="12">
                    <input nz-input formControlName="depName" placeholder="ËØ∑ËæìÂÖ•ÂåªÈô¢ËÅîÁ≥ªÊñπÂºè">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label [nzSpan]="7">ÁßëÂÆ§ËÅîÁ≥ªÊñπÂºè</nz-form-label>
                <nz-form-control nzHasFeedback [nzSpan]="12">
                    <input nz-input formControlName="depLink" placeholder="ËØ∑ËæìÂÖ•ÂåªÈô¢ËÅîÁ≥ªÊñπÂºè">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label nzRequired [nzSpan]="7">Â§áÊ≥®</nz-form-label>
                <nz-form-control nzHasFeedback [nzSpan]="12">
                    <input formControlName="depRemark" nz-input placeholder="ËØ∑ËæìÂÖ•ÂåªÈô¢Âú∞ÂùÄ">
                </nz-form-control>
            </nz-form-item>
        </form>
    </ng-template>
    <ng-template #departFooter>
        <div nz-row [nzType]="'flex'" [nzJustify]="'center'">
            <button nz-button [nzType]="'primary'" [disabled]="!departmentForm.valid" (click)="submitForm($event,departmentForm.value)">Êèê‰∫§</button>
            <button nz-button (click)="resetForm($event)">ÈáçÁΩÆ</button>
        </div>
    </ng-template>
</nz-modal>
<!-- Êñ∞Â¢ûÂåªÁîü -->
<nz-modal [(nzVisible)]="doctorVisible" [nzTitle]="doctorTitle" [nzContent]="doctorContent" [nzFooter]="doctorFooter" (nzOnCancel)="doctorVisible=false">
    <ng-template #doctorContent>
        <form nz-form [formGroup]="doctorForm">
            <nz-form-item>
                <nz-form-label nzRequired [nzSpan]="7">ÊâÄÂ±ûÂåªÈô¢</nz-form-label>
                <nz-form-control nzHasFeedback [nzSpan]="12">
                    <input nz-input formControlName="affiliationHospital" placeholder="ËØ∑ËæìÂÖ•ÂåªÈô¢ÂêçÁß∞">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label nzRequired [nzSpan]="7">
                    ÊâÄÂ±ûÁßëÂÆ§
                </nz-form-label>
                <nz-form-control [nzSpan]="12" nzHasFeedback>
                    <input nz-input formControlName="affiliationDep" placeholder="ËØ∑Â°´ÂÜôÁßëÂÆ§">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label nzRequired [nzSpan]="7">
                    ÂåªÁîü
                </nz-form-label>
                <nz-form-control [nzSpan]="12" nzHasFeedback>
                    <input nz-input formControlName="doctor" placeholder="ËØ∑Â°´ÂÜôÂåªÁîü">
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label nzRequired [nzSpan]="7">
                    ËÅîÁ≥ªÊñπÂºè
                </nz-form-label>
                <nz-form-control [nzSpan]="12" nzHasFeedback>
                    <input nz-input formControlName="tel" placeholder="ËØ∑Â°´ÂÜôËÅîÁ≥ªÊñπÂºè">
                </nz-form-control>
            </nz-form-item>
        </form>
    </ng-template>
    <ng-template #doctorFooter>
        <div nz-row [nzType]="'flex'" [nzJustify]="'center'">
            <button nz-button [nzType]="'primary'" [disabled]="!doctorForm.valid" (click)="submitForm($event,departmentForm.value)">Êèê‰∫§</button>
            <button nz-button (click)="resetForm($event)">ÈáçÁΩÆ</button>
        </div>
    </ng-template>
</nz-modal>

<nz-drawer [nzVisible]="drawervisible" [nzClosable]="false" [nzWidth]="640" (nzOnClose)="close()">
    <p class="title">ÂåªÈô¢‰ø°ÊÅØ</p>
    <div nz-row>
        <div nz-col nzSpan="12">
            <div class="item-wrap">
                <p class="label">ÂåªÈô¢ÂêçÁß∞:Lily</p>
            </div>
        </div>
        <div nz-col nzSpan="12">
            <div class="item-wrap">
                <p class="label">ÂåªÈô¢Âú∞ÂùÄ:AntDesign@example.com</p>
            </div>
        </div>
        <div nz-col nzSpan="12">
            <div class="item-wrap">
                <p class="label">ÂåªÈô¢ÁîµËØù:133333333</p>
            </div>
        </div>
    </div>
    <p class="title">ÁßëÂÆ§‰ø°ÊÅØ</p>
    <div nz-row>
        <div nz-col nzSpan="12">
            <div class="item-wrap">
                <p class="label">ÁßëÂÆ§ÂêçÁß∞:ÂÜÖÁßë</p>HangZhou
            </div>
        </div>
        <div nz-col nzSpan="12">
            <div class="item-wrap">
                <p class="label">ÁßëÂÆ§ÁîµËØù:0912-18182211</p>Chinaüá®üá≥
            </div>
        </div>
    </div>
    <div nz-row>
        <div nz-col nzSpan="24">
            <div class="item-wrap">
                <p class="label">Â§áÊ≥®:February 2,1900</p>
            </div>
        </div>
    </div>
    <p class="title">ÂåªÁîü‰ø°ÊÅØ</p>
    <div nz-row>

        <div nz-col nzSpan="12">
            <div class="item-wrap">
                <p class="label">ÂåªÁîüÂßìÂêç:Programmer</p>
            </div>
        </div>
        <div nz-col nzSpan="12">
            <div class="item-wrap">
                <p class="label">ÂåªÁîüÊÄßÂà´:Áî∑</p>
            </div>
        </div>
        <div nz-col nzSpan="12">
            <div class="item-wrap">
                <p class="label">ÂåªÁîüËÅîÁ≥ªÁîµËØù:177777777</p>
            </div>
        </div>
        <div nz-col nzSpan="24">
            <div class="item-wrap">
                <p class="label">Â§áÊ≥®:Make things as simple as possible but no simpler.</p>
            </div>
        </div>
    </div>
</nz-drawer>